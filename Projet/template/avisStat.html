<!DOCTYPE html>
{% load static %}
<html lang="en">

    <head>
        <meta charset="utf-8">
        <title>Fithnity</title>
        <link rel="icon" href="{% static 'img/icon.jpg' %}"  type="image/x-icon">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta content="" name="keywords">
        <meta content="" name="description">

        <!-- Google Web Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,400;0,700;0,900;1,400;1,700;1,900&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet"> 

        <!-- Icon Font Stylesheet -->
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"/>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

        <!-- Libraries Stylesheet -->
        <link href="../static/lib/animate/animate.min.css" rel="stylesheet">
        <link href="../static/lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">


        <!-- Customized Bootstrap Stylesheet -->
        <link href="../static/css/bootstrap.min.css" rel="stylesheet">

        <!-- Template Stylesheet -->
        <link href="../static/css/style.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    </head>

    <body>

        <!-- Topbar Start -->
        <div class="container-fluid topbar bg-secondary d-none d-xl-block w-100">
            <div class="container">
                <div class="row gx-0 align-items-center" style="height: 45px;">
                    <div class="col-lg-6 text-center text-lg-start mb-lg-0">
                        <div class="d-flex flex-wrap">
                            <a href="{% url 'avis_approval' %}" class="text-muted me-4"><i class="fas fa-map-marker-alt text-primary me-2"></i>Approving</a>
                            <a href=" /stat/avisStat.html" class="text-muted me-4">
                                <i class="fas fa-map-marker-alt text-primary me-2"></i>Statistics
                            </a>

                        </div>
                    </div>

                </div>
            </div>
        </div>
        <!-- Topbar End -->



        <!-- Header Start -->
        <div class="container-fluid bg-breadcrumb">
            <div class="container text-center py-5" style="max-width: 900px;">
                <h4 class="text-white display-4 mb-4 wow fadeInDown" data-wow-delay="0.1s">Reviews Statistics</h4>
  
            </div>
        </div>
        <!-- Header End -->
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Review Satisfaction Statistics</title>
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        </head>
        <body>

            <div class="p-5 bg-light rounded">
                <div class="bg-white rounded p-4 mb-4">
                    <div>
                        <p class="section-title">Total Reviews:</p>
                        <p>{{ total_reviews }}</p>
                    </div>
        
                    <!-- Section for Satisfied Reviews -->
                    <div>
                        <p class="section-title">Satisfied Reviews:</p>
                        <p><span class="percentage satisfied">{{ satisfied_count }} ({{ satisfied_percentage }}%)</span></p>
                    </div>
        
                    <!-- Section for Non-Satisfied Reviews -->
                    <div>
                        <p class="section-title">Non-Satisfied Reviews:</p>
                        <p><span class="percentage non-satisfied">{{ non_satisfied_count }} ({{ non_satisfied_percentage }}%)</span></p>
                    </div>
        
                    <!-- Pie Chart -->
                    <canvas id="satisfactionPieChart"></canvas>
        
                    <!-- Bar Chart -->
                    <canvas id="satisfactionBarChart"></canvas>
                
                    <style>
                        /* Centering the container holding the charts */
                        .charts-container {
                            display: flex;
                            justify-content: center; /* Center horizontally */
                            align-items: center; /* Center vertically */
                            height: 100vh; /* Full viewport height */
                        }
        /* Styling the headings */
        h1 {
            font-size: 36px;
            color: #1a2540; /* Dark blue for the heading */
            margin-bottom: 20px;
            font-weight: 600;
        }

        /* Styling the section titles */
        .section-title {
            font-size: 24px;
            color: #333;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: left;
        }

        /* Styling the paragraphs */
        p {
            font-size: 18px;
            color: #333;
            margin-bottom: 15px;
            font-weight: 500;
            text-align: left;
        }

        /* Adding a colorful badge to percentages */
        .percentage {
            font-weight: bold;
            padding: 8px 16px;
            border-radius: 20px;
            color: white;
        }

        /* Green for satisfied, red for non-satisfied */
        .satisfied {
            background-color: #1a2540; /* Green */
        }

        .non-satisfied {
            background-color: #F44336; /* Red */
        }
                        /* Ensuring the canvas elements fit within the container */
                        #satisfactionPieChart, #satisfactionBarChart {
                            width: 400px !important;  /* Adjust width */
                            height: 400px !important; /* Adjust height */
                        }
                
                        /* Optional: You can adjust this style to fit your layout */
                        .chart-wrapper {
                            text-align: center; /* Align the chart wrapper content */
                        }
                    </style>      

                    <!-- Pie Chart -->
                    <canvas id="satisfactionPieChart" ></canvas>
        
                    <!-- Bar Chart -->
                    <canvas id="satisfactionBarChart" ></canvas>
                </div>
            </div>
            
            
            <script>
                // Pie Chart
                const ctxPie = document.getElementById('satisfactionPieChart').getContext('2d');
                const satisfactionPieChart = new Chart(ctxPie, {
                    type: 'pie',
                    data: {
                        labels: ['Satisfied', 'Non-Satisfied'],
                        datasets: [{
                            label: 'Satisfaction',
                            data: [{{ satisfied_percentage }}, {{ non_satisfied_percentage }}],
                            backgroundColor: ['#1a2540', '#ff0000'], // Blue for satisfied, Red for non-satisfied
                            borderColor: ['#1a2540', '#ff0000'],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'top',
                            },
                            tooltip: {
                                enabled: true
                            }
                        }
                    }
                });
        
            </script>


            </div>
            </div>


                    <!-- Back to Top -->
        <a href="#" class="btn btn-secondary btn-lg-square rounded-circle back-to-top"><i class="fa fa-arrow-up"></i></a>   

        
        <!-- JavaScript Libraries -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="../static/lib/wow/wow.min.js"></script>
        <script src="../static/lib/easing/easing.min.js"></script>
        <script src="../static/lib/waypoints/waypoints.min.js"></script>
        <script src="../static/lib/counterup/counterup.min.js"></script>
        <script src="../static/lib/owlcarousel/owl.carousel.min.js"></script>
        
    
        <!-- Template Javascript -->
        <script src="../static/js/main.js"></script>
        </body>
    
    </html>



